import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export type Locale = 'zh-CN' | 'zh-TW' | 'en-US' | 'ja-JP' | 'ko-KR' | 'fr-FR' | 'de-DE' | 'es-ES' | 'ru-RU'

export interface LangOption {
  code: Locale
  label: string
  short: string
}

export const languages: LangOption[] = [
  { code: 'zh-CN', label: '简体中文', short: 'ZH' },
  { code: 'zh-TW', label: '繁體中文', short: 'TW' },
  { code: 'en-US', label: 'English', short: 'EN' },
  { code: 'ja-JP', label: '日本語', short: 'JA' },
  { code: 'ko-KR', label: '한국어', short: 'KO' },
  { code: 'fr-FR', label: 'Français', short: 'FR' },
  { code: 'de-DE', label: 'Deutsch', short: 'DE' },
  { code: 'es-ES', label: 'Español', short: 'ES' },
  { code: 'ru-RU', label: 'Русский', short: 'RU' },
]

const messages: Record<Locale, Record<string, string>> = {
  'zh-CN': {
    // Nav
    'nav.explore': '探索',
    'nav.knowledge': '知识',
    'nav.social': '社交',
    'nav.home': '首页',
    'nav.album': '相册',
    'nav.timeline': '时光',
    'nav.moments': '朋友圈',
    'nav.knowledgeBase': '知识库',
    'nav.archive': '归档',
    'nav.friends': '友链',
    'nav.chat': '私信',
    'nav.publish': '发布新文章',
    // Topbar
    'topbar.search': '搜索文章、时光、知识...',
    'topbar.connect': '连接钱包',
    'topbar.back': '返回上一页',
    'topbar.lang': '切换语言',
    // Pages
    'page.home': '首页',
    'page.album': '相册',
    'page.timeline': '时光',
    'page.moments': '朋友圈',
    'page.knowledge': '知识库',
    'page.archive': '归档',
    'page.friends': '友链',
    'page.chat': '私信',
    'page.settings': '设置',
    // Home
    'home.badge': 'Ethereum Mainnet · EIP-4361 已验证',
    'home.title': '你的 Web3 灵魂\n永久在链上',
    'home.sub': '不仅仅是博客，而是你链上的精神宇宙。\n每一篇文章、每一张照片、每一个时刻，都由你的钱包签名，永远属于你。',
    'home.stat.posts': '文章已上链',
    'home.stat.nfts': 'NFT 已铸造',
    'home.stat.readers': '链上读者',
    'home.stat.earnings': '收益总额',
    'home.nft.title': '你的最新文章可以铸造为 NFT',
    'home.nft.btn': '立即铸造',
    'home.posts': '最新文章',
    'home.viewAll': '查看全部',
    'home.moments': '朋友圈动态',
    'home.enterMoments': '进入朋友圈',
    // Settings
    'settings.avatar': '头像',
    'settings.avatarUpload': '点击上传头像',
    'settings.avatarHint': '支持 JPG、PNG，建议 200×200 以上',
    'settings.avatarBtn': '选择图片',
    'settings.nickname': '昵称',
    'settings.nicknameHint': '最多 20 个字符',
    'settings.quote': '个人签名',
    'settings.quoteHint': '显示在侧边栏资料卡上',
    'settings.bio': '个人介绍',
    'settings.tags': '个人标签',
    'settings.tagsHint': '最多 6 个标签，按回车添加',
    'settings.addTag': '+ 添加标签',
    'settings.social': '社交链接',
    'settings.save': '保存设置',
    'settings.saved': '设置已保存',
    'settings.preview': '资料卡预览',
    // Profile
    'profile.posts': '文章',
    'profile.nfts': 'NFT',
    'profile.readers': '读者',
  },
  'zh-TW': {
    'nav.explore': '探索',
    'nav.knowledge': '知識',
    'nav.social': '社交',
    'nav.home': '首頁',
    'nav.album': '相簿',
    'nav.timeline': '時光',
    'nav.moments': '朋友圈',
    'nav.knowledgeBase': '知識庫',
    'nav.archive': '歸檔',
    'nav.friends': '友鏈',
    'nav.chat': '私訊',
    'nav.publish': '發佈新文章',
    'topbar.search': '搜尋文章、時光、知識...',
    'topbar.connect': '連接錢包',
    'topbar.back': '返回上一頁',
    'topbar.lang': '切換語言',
    'page.home': '首頁',
    'page.album': '相簿',
    'page.timeline': '時光',
    'page.moments': '朋友圈',
    'page.knowledge': '知識庫',
    'page.archive': '歸檔',
    'page.friends': '友鏈',
    'page.chat': '私訊',
    'page.settings': '設定',
    'home.badge': 'Ethereum Mainnet · EIP-4361 已驗證',
    'home.title': '你的 Web3 靈魂\n永久在鏈上',
    'home.sub': '不僅僅是部落格，而是你鏈上的精神宇宙。\n每一篇文章、每一張照片、每一個時刻，都由你的錢包簽名，永遠屬於你。',
    'home.stat.posts': '文章已上鏈',
    'home.stat.nfts': 'NFT 已鑄造',
    'home.stat.readers': '鏈上讀者',
    'home.stat.earnings': '收益總額',
    'home.nft.title': '你的最新文章可以鑄造為 NFT',
    'home.nft.btn': '立即鑄造',
    'home.posts': '最新文章',
    'home.viewAll': '查看全部',
    'home.moments': '朋友圈動態',
    'home.enterMoments': '進入朋友圈',
    'settings.avatar': '頭像',
    'settings.avatarUpload': '點擊上傳頭像',
    'settings.avatarHint': '支援 JPG、PNG，建議 200×200 以上',
    'settings.avatarBtn': '選擇圖片',
    'settings.nickname': '暱稱',
    'settings.nicknameHint': '最多 20 個字元',
    'settings.quote': '個人簽名',
    'settings.quoteHint': '顯示在側邊欄資料卡上',
    'settings.bio': '個人介紹',
    'settings.tags': '個人標籤',
    'settings.tagsHint': '最多 6 個標籤，按 Enter 新增',
    'settings.addTag': '+ 新增標籤',
    'settings.social': '社交連結',
    'settings.save': '儲存設定',
    'settings.saved': '設定已儲存',
    'settings.preview': '資料卡預覽',
    'profile.posts': '文章',
    'profile.nfts': 'NFT',
    'profile.readers': '讀者',
  },
  'en-US': {
    'nav.explore': 'Explore',
    'nav.knowledge': 'Knowledge',
    'nav.social': 'Social',
    'nav.home': 'Home',
    'nav.album': 'Album',
    'nav.timeline': 'Timeline',
    'nav.moments': 'Moments',
    'nav.knowledgeBase': 'Knowledge',
    'nav.archive': 'Archive',
    'nav.friends': 'Friends',
    'nav.chat': 'Messages',
    'nav.publish': 'New Post',
    'topbar.search': 'Search posts, timeline, knowledge...',
    'topbar.connect': 'Connect Wallet',
    'topbar.back': 'Go back',
    'topbar.lang': 'Language',
    'page.home': 'Home',
    'page.album': 'Album',
    'page.timeline': 'Timeline',
    'page.moments': 'Moments',
    'page.knowledge': 'Knowledge',
    'page.archive': 'Archive',
    'page.friends': 'Friends',
    'page.chat': 'Messages',
    'page.settings': 'Settings',
    'home.badge': 'Ethereum Mainnet · EIP-4361 Verified',
    'home.title': 'Your Web3 Soul\nForever On-Chain',
    'home.sub': 'More than a blog — your spiritual universe on-chain.\nEvery post, photo, and moment is signed by your wallet, forever yours.',
    'home.stat.posts': 'Posts On-Chain',
    'home.stat.nfts': 'NFTs Minted',
    'home.stat.readers': 'On-Chain Readers',
    'home.stat.earnings': 'Total Earnings',
    'home.nft.title': 'Your latest post can be minted as NFT',
    'home.nft.btn': 'Mint Now',
    'home.posts': 'Latest Posts',
    'home.viewAll': 'View All',
    'home.moments': 'Moments Feed',
    'home.enterMoments': 'Enter Moments',
    'settings.avatar': 'Avatar',
    'settings.avatarUpload': 'Click to upload avatar',
    'settings.avatarHint': 'JPG, PNG supported. 200×200 or larger',
    'settings.avatarBtn': 'Choose Image',
    'settings.nickname': 'Nickname',
    'settings.nicknameHint': 'Max 20 characters',
    'settings.quote': 'Signature',
    'settings.quoteHint': 'Shown on sidebar profile card',
    'settings.bio': 'Bio',
    'settings.tags': 'Tags',
    'settings.tagsHint': 'Max 6 tags, press Enter to add',
    'settings.addTag': '+ Add tag',
    'settings.social': 'Social Links',
    'settings.save': 'Save Settings',
    'settings.saved': 'Settings saved',
    'settings.preview': 'Profile Preview',
    'profile.posts': 'Posts',
    'profile.nfts': 'NFTs',
    'profile.readers': 'Readers',
  },
  'ja-JP': {
    'nav.explore': '探索',
    'nav.knowledge': 'ナレッジ',
    'nav.social': 'ソーシャル',
    'nav.home': 'ホーム',
    'nav.album': 'アルバム',
    'nav.timeline': 'タイムライン',
    'nav.moments': 'モーメント',
    'nav.knowledgeBase': 'ナレッジ',
    'nav.archive': 'アーカイブ',
    'nav.friends': 'フレンド',
    'nav.chat': 'メッセージ',
    'nav.publish': '新規投稿',
    'topbar.search': '記事、タイムライン、ナレッジを検索...',
    'topbar.connect': 'ウォレット接続',
    'topbar.back': '戻る',
    'topbar.lang': '言語',
    'page.home': 'ホーム',
    'page.album': 'アルバム',
    'page.timeline': 'タイムライン',
    'page.moments': 'モーメント',
    'page.knowledge': 'ナレッジ',
    'page.archive': 'アーカイブ',
    'page.friends': 'フレンド',
    'page.chat': 'メッセージ',
    'page.settings': '設定',
    'home.badge': 'Ethereum Mainnet · EIP-4361 検証済み',
    'home.title': 'あなたのWeb3ソウル\nチェーン上に永遠に',
    'home.sub': 'ブログ以上の存在 — チェーン上のあなたの精神世界。\nすべての記事、写真、瞬間がウォレットで署名され、永遠にあなたのもの。',
    'home.stat.posts': '投稿済み',
    'home.stat.nfts': 'NFT発行',
    'home.stat.readers': '読者数',
    'home.stat.earnings': '総収益',
    'home.nft.title': '最新記事をNFTとして発行できます',
    'home.nft.btn': '今すぐ発行',
    'home.posts': '最新の投稿',
    'home.viewAll': 'すべて見る',
    'home.moments': 'モーメント',
    'home.enterMoments': 'モーメントへ',
    'settings.avatar': 'アバター',
    'settings.avatarUpload': 'アバターをアップロード',
    'settings.avatarHint': 'JPG、PNG対応。200×200以上推奨',
    'settings.avatarBtn': '画像を選択',
    'settings.nickname': 'ニックネーム',
    'settings.nicknameHint': '最大20文字',
    'settings.quote': '署名',
    'settings.quoteHint': 'サイドバーに表示',
    'settings.bio': '自己紹介',
    'settings.tags': 'タグ',
    'settings.tagsHint': '最大6個、Enterで追加',
    'settings.addTag': '+ タグ追加',
    'settings.social': 'SNSリンク',
    'settings.save': '設定を保存',
    'settings.saved': '保存しました',
    'settings.preview': 'プレビュー',
    'profile.posts': '投稿',
    'profile.nfts': 'NFT',
    'profile.readers': '読者',
  },
  'ko-KR': {
    'nav.explore': '탐색', 'nav.knowledge': '지식', 'nav.social': '소셜',
    'nav.home': '홈', 'nav.album': '앨범', 'nav.timeline': '타임라인',
    'nav.moments': '모먼트', 'nav.knowledgeBase': '지식창고', 'nav.archive': '아카이브',
    'nav.friends': '친구', 'nav.chat': '메시지', 'nav.publish': '새 글 작성',
    'topbar.search': '글, 타임라인, 지식 검색...', 'topbar.connect': '지갑 연결',
    'topbar.back': '뒤로', 'topbar.lang': '언어',
    'page.home': '홈', 'page.album': '앨범', 'page.timeline': '타임라인',
    'page.moments': '모먼트', 'page.knowledge': '지식창고', 'page.archive': '아카이브',
    'page.friends': '친구', 'page.chat': '메시지', 'page.settings': '설정',
    'home.badge': 'Ethereum Mainnet · EIP-4361 인증됨',
    'home.title': '당신의 Web3 영혼\n영원히 온체인에',
    'home.sub': '블로그 그 이상 — 온체인 정신세계.\n모든 글, 사진, 순간이 지갑으로 서명되어 영원히 당신의 것.',
    'home.stat.posts': '온체인 글', 'home.stat.nfts': 'NFT 발행',
    'home.stat.readers': '온체인 독자', 'home.stat.earnings': '총 수익',
    'home.nft.title': '최신 글을 NFT로 발행할 수 있습니다', 'home.nft.btn': '지금 발행',
    'home.posts': '최신 글', 'home.viewAll': '전체 보기',
    'home.moments': '모먼트 피드', 'home.enterMoments': '모먼트 보기',
    'settings.avatar': '아바타', 'settings.avatarUpload': '아바타 업로드',
    'settings.avatarHint': 'JPG, PNG 지원. 200×200 이상', 'settings.avatarBtn': '이미지 선택',
    'settings.nickname': '닉네임', 'settings.nicknameHint': '최대 20자',
    'settings.quote': '서명', 'settings.quoteHint': '사이드바에 표시',
    'settings.bio': '소개', 'settings.tags': '태그',
    'settings.tagsHint': '최대 6개, Enter로 추가', 'settings.addTag': '+ 태그 추가',
    'settings.social': '소셜 링크', 'settings.save': '설정 저장',
    'settings.saved': '저장 완료', 'settings.preview': '미리보기',
    'profile.posts': '글', 'profile.nfts': 'NFT', 'profile.readers': '독자',
  },
  'fr-FR': {
    'nav.explore': 'Explorer', 'nav.knowledge': 'Savoir', 'nav.social': 'Social',
    'nav.home': 'Accueil', 'nav.album': 'Album', 'nav.timeline': 'Chronologie',
    'nav.moments': 'Moments', 'nav.knowledgeBase': 'Base', 'nav.archive': 'Archives',
    'nav.friends': 'Amis', 'nav.chat': 'Messages', 'nav.publish': 'Nouvel article',
    'topbar.search': 'Rechercher articles, chronologie...', 'topbar.connect': 'Connecter',
    'topbar.back': 'Retour', 'topbar.lang': 'Langue',
    'page.home': 'Accueil', 'page.album': 'Album', 'page.timeline': 'Chronologie',
    'page.moments': 'Moments', 'page.knowledge': 'Savoir', 'page.archive': 'Archives',
    'page.friends': 'Amis', 'page.chat': 'Messages', 'page.settings': 'Paramètres',
    'home.badge': 'Ethereum Mainnet · EIP-4361 Vérifié',
    'home.title': 'Votre âme Web3\nÉternelle sur la chaîne',
    'home.sub': 'Plus qu\'un blog — votre univers sur la blockchain.\nChaque article signé par votre portefeuille, à jamais vôtre.',
    'home.stat.posts': 'Articles', 'home.stat.nfts': 'NFTs', 'home.stat.readers': 'Lecteurs', 'home.stat.earnings': 'Revenus',
    'home.nft.title': 'Votre dernier article peut devenir un NFT', 'home.nft.btn': 'Créer NFT',
    'home.posts': 'Articles récents', 'home.viewAll': 'Voir tout',
    'home.moments': 'Fil de moments', 'home.enterMoments': 'Voir les moments',
    'settings.avatar': 'Avatar', 'settings.avatarUpload': 'Télécharger un avatar',
    'settings.avatarHint': 'JPG, PNG. 200×200 minimum', 'settings.avatarBtn': 'Choisir',
    'settings.nickname': 'Pseudo', 'settings.nicknameHint': '20 caractères max',
    'settings.quote': 'Signature', 'settings.quoteHint': 'Affiché dans la barre latérale',
    'settings.bio': 'Bio', 'settings.tags': 'Tags',
    'settings.tagsHint': 'Max 6, appuyez Entrée', 'settings.addTag': '+ Ajouter',
    'settings.social': 'Liens sociaux', 'settings.save': 'Enregistrer',
    'settings.saved': 'Enregistré', 'settings.preview': 'Aperçu',
    'profile.posts': 'Articles', 'profile.nfts': 'NFTs', 'profile.readers': 'Lecteurs',
  },
  'de-DE': {
    'nav.explore': 'Entdecken', 'nav.knowledge': 'Wissen', 'nav.social': 'Sozial',
    'nav.home': 'Startseite', 'nav.album': 'Album', 'nav.timeline': 'Zeitachse',
    'nav.moments': 'Momente', 'nav.knowledgeBase': 'Wissensbasis', 'nav.archive': 'Archiv',
    'nav.friends': 'Freunde', 'nav.chat': 'Nachrichten', 'nav.publish': 'Neuer Beitrag',
    'topbar.search': 'Beiträge, Zeitachse suchen...', 'topbar.connect': 'Wallet verbinden',
    'topbar.back': 'Zurück', 'topbar.lang': 'Sprache',
    'page.home': 'Startseite', 'page.album': 'Album', 'page.timeline': 'Zeitachse',
    'page.moments': 'Momente', 'page.knowledge': 'Wissen', 'page.archive': 'Archiv',
    'page.friends': 'Freunde', 'page.chat': 'Nachrichten', 'page.settings': 'Einstellungen',
    'home.badge': 'Ethereum Mainnet · EIP-4361 Verifiziert',
    'home.title': 'Deine Web3-Seele\nEwig auf der Chain',
    'home.sub': 'Mehr als ein Blog — dein geistiges Universum auf der Blockchain.\nJeder Beitrag von deinem Wallet signiert, für immer deins.',
    'home.stat.posts': 'Beiträge', 'home.stat.nfts': 'NFTs', 'home.stat.readers': 'Leser', 'home.stat.earnings': 'Einnahmen',
    'home.nft.title': 'Dein neuester Beitrag kann als NFT geprägt werden', 'home.nft.btn': 'Jetzt prägen',
    'home.posts': 'Neueste Beiträge', 'home.viewAll': 'Alle ansehen',
    'home.moments': 'Momente-Feed', 'home.enterMoments': 'Zu Momenten',
    'settings.avatar': 'Avatar', 'settings.avatarUpload': 'Avatar hochladen',
    'settings.avatarHint': 'JPG, PNG. Min. 200×200', 'settings.avatarBtn': 'Bild wählen',
    'settings.nickname': 'Spitzname', 'settings.nicknameHint': 'Max. 20 Zeichen',
    'settings.quote': 'Signatur', 'settings.quoteHint': 'In der Seitenleiste angezeigt',
    'settings.bio': 'Über mich', 'settings.tags': 'Tags',
    'settings.tagsHint': 'Max 6, Enter drücken', 'settings.addTag': '+ Hinzufügen',
    'settings.social': 'Soziale Links', 'settings.save': 'Speichern',
    'settings.saved': 'Gespeichert', 'settings.preview': 'Vorschau',
    'profile.posts': 'Beiträge', 'profile.nfts': 'NFTs', 'profile.readers': 'Leser',
  },
  'es-ES': {
    'nav.explore': 'Explorar', 'nav.knowledge': 'Saber', 'nav.social': 'Social',
    'nav.home': 'Inicio', 'nav.album': 'Álbum', 'nav.timeline': 'Cronología',
    'nav.moments': 'Momentos', 'nav.knowledgeBase': 'Base', 'nav.archive': 'Archivo',
    'nav.friends': 'Amigos', 'nav.chat': 'Mensajes', 'nav.publish': 'Nuevo artículo',
    'topbar.search': 'Buscar artículos, cronología...', 'topbar.connect': 'Conectar billetera',
    'topbar.back': 'Volver', 'topbar.lang': 'Idioma',
    'page.home': 'Inicio', 'page.album': 'Álbum', 'page.timeline': 'Cronología',
    'page.moments': 'Momentos', 'page.knowledge': 'Saber', 'page.archive': 'Archivo',
    'page.friends': 'Amigos', 'page.chat': 'Mensajes', 'page.settings': 'Ajustes',
    'home.badge': 'Ethereum Mainnet · EIP-4361 Verificado',
    'home.title': 'Tu alma Web3\nPara siempre en la cadena',
    'home.sub': 'Más que un blog — tu universo espiritual en blockchain.\nCada artículo firmado por tu billetera, para siempre tuyo.',
    'home.stat.posts': 'Artículos', 'home.stat.nfts': 'NFTs', 'home.stat.readers': 'Lectores', 'home.stat.earnings': 'Ingresos',
    'home.nft.title': 'Tu último artículo se puede acuñar como NFT', 'home.nft.btn': 'Acuñar',
    'home.posts': 'Últimos artículos', 'home.viewAll': 'Ver todo',
    'home.moments': 'Feed de momentos', 'home.enterMoments': 'Ver momentos',
    'settings.avatar': 'Avatar', 'settings.avatarUpload': 'Subir avatar',
    'settings.avatarHint': 'JPG, PNG. Mínimo 200×200', 'settings.avatarBtn': 'Elegir imagen',
    'settings.nickname': 'Apodo', 'settings.nicknameHint': 'Máx. 20 caracteres',
    'settings.quote': 'Firma', 'settings.quoteHint': 'Se muestra en la barra lateral',
    'settings.bio': 'Biografía', 'settings.tags': 'Etiquetas',
    'settings.tagsHint': 'Máx. 6, Enter para añadir', 'settings.addTag': '+ Añadir',
    'settings.social': 'Enlaces sociales', 'settings.save': 'Guardar',
    'settings.saved': 'Guardado', 'settings.preview': 'Vista previa',
    'profile.posts': 'Artículos', 'profile.nfts': 'NFTs', 'profile.readers': 'Lectores',
  },
  'ru-RU': {
    'nav.explore': 'Обзор', 'nav.knowledge': 'Знания', 'nav.social': 'Общение',
    'nav.home': 'Главная', 'nav.album': 'Альбом', 'nav.timeline': 'Хроника',
    'nav.moments': 'Моменты', 'nav.knowledgeBase': 'База знаний', 'nav.archive': 'Архив',
    'nav.friends': 'Друзья', 'nav.chat': 'Сообщения', 'nav.publish': 'Новый пост',
    'topbar.search': 'Поиск статей, хроники...', 'topbar.connect': 'Подключить кошелёк',
    'topbar.back': 'Назад', 'topbar.lang': 'Язык',
    'page.home': 'Главная', 'page.album': 'Альбом', 'page.timeline': 'Хроника',
    'page.moments': 'Моменты', 'page.knowledge': 'Знания', 'page.archive': 'Архив',
    'page.friends': 'Друзья', 'page.chat': 'Сообщения', 'page.settings': 'Настройки',
    'home.badge': 'Ethereum Mainnet · EIP-4361 Подтверждено',
    'home.title': 'Ваша Web3 душа\nНавечно в блокчейне',
    'home.sub': 'Больше чем блог — ваша духовная вселенная в блокчейне.\nКаждый пост подписан вашим кошельком, навсегда ваш.',
    'home.stat.posts': 'Постов', 'home.stat.nfts': 'NFT', 'home.stat.readers': 'Читателей', 'home.stat.earnings': 'Доход',
    'home.nft.title': 'Ваш последний пост можно создать как NFT', 'home.nft.btn': 'Создать',
    'home.posts': 'Последние посты', 'home.viewAll': 'Все посты',
    'home.moments': 'Лента моментов', 'home.enterMoments': 'К моментам',
    'settings.avatar': 'Аватар', 'settings.avatarUpload': 'Загрузить аватар',
    'settings.avatarHint': 'JPG, PNG. Мин. 200×200', 'settings.avatarBtn': 'Выбрать',
    'settings.nickname': 'Имя', 'settings.nicknameHint': 'Макс. 20 символов',
    'settings.quote': 'Подпись', 'settings.quoteHint': 'Отображается в боковой панели',
    'settings.bio': 'О себе', 'settings.tags': 'Теги',
    'settings.tagsHint': 'Макс. 6, Enter для добавления', 'settings.addTag': '+ Добавить',
    'settings.social': 'Соцсети', 'settings.save': 'Сохранить',
    'settings.saved': 'Сохранено', 'settings.preview': 'Предпросмотр',
    'profile.posts': 'Постов', 'profile.nfts': 'NFT', 'profile.readers': 'Читателей',
  },
}

export const useI18n = defineStore('i18n', () => {
  const saved = localStorage.getItem('chainlog_locale') as Locale | null
  const locale = ref<Locale>(saved || 'zh-CN')

  function t(key: string): string {
    return messages[locale.value]?.[key] || messages['zh-CN'][key] || key
  }

  function setLocale(code: Locale) {
    locale.value = code
    localStorage.setItem('chainlog_locale', code)
    document.documentElement.lang = code
  }

  const currentLang = computed(() => languages.find(l => l.code === locale.value) || languages[0])

  return { locale, t, setLocale, currentLang }
})
