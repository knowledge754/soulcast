<script setup lang="ts">
import Icon from '../components/icons/Icon.vue'

const feedItems = [
  {
    id: 1,
    avatar: 'linear-gradient(135deg, #f6ad55, #ed64a6)',
    name: 'vitalik.eth',
    addr: '0x3F2A...4B1E',
    time: '3å°æ—¶å‰',
    content: 'ä»Šå¤©åœ¨ Devcon é‡åˆ°äº†å¥½å¤šæœ‰è¶£çš„çµé­‚ï¼ŒåŒºå—é“¾ä¸åªæ˜¯æŠ€æœ¯ï¼Œå®ƒæ˜¯ä¸€ç§çœ‹ä¸–ç•Œçš„æ–¹å¼ã€‚æ¯ä¸€æ¬¡æ¡æ‰‹ï¼Œéƒ½æ˜¯ä¸¤ä¸ªé“¾ä¸Šåœ°å€çš„ç¢°æ’ ğŸŒ',
    images: [
      { bg: 'rgba(99,179,237,0.1), rgba(183,148,244,0.1)', emoji: 'ğŸ¤' },
      { bg: 'rgba(183,148,244,0.1), rgba(246,135,179,0.1)', emoji: 'ğŸ‘¥' },
      { bg: 'rgba(251,176,64,0.1), rgba(104,211,145,0.1)', emoji: 'ğŸŒƒ' }
    ],
    likes: 512,
    comments: 89,
    block: '#21445521'
  },
  {
    id: 2,
    avatar: 'linear-gradient(135deg, #68d391, #4fd1c5)',
    name: 'NightCoder',
    addr: '0xBc1D...7f3A',
    time: 'æ˜¨å¤©',
    content: 'å‡Œæ™¨ 2 ç‚¹ï¼Œå†™å®Œäº†ç¬¬ä¸€ä¸ªå®Œæ•´çš„ DAppï¼ŒæŠŠä¸–ç•Œäº¤ç»™ä½ ä»¬äº†ã€‚ä»£ç ä¸Šé“¾é‚£ä¸€åˆ»ï¼Œæ¯”ä»»ä½•å¥–åŠ±éƒ½è®©æˆ‘æ„ŸåŠ¨ã€‚æ™šå®‰ ğŸŒ™',
    images: [],
    likes: 234,
    comments: 41,
    block: '#21412200'
  },
  {
    id: 3,
    avatar: 'linear-gradient(135deg, #76e4f7, #b794f4)',
    name: 'SoulWriter',
    addr: '0xD42F...3a9C',
    time: '2å¤©å‰',
    content: 'åœ¨æ—¥è½å‰å‘å¸ƒäº†æˆ‘çš„ç¬¬ 10 ç¯‡æ–‡ç« ï¼Œæ„Ÿè°¢æ¯ä¸€ä¸ªè¯»è¿‡æˆ‘å­—çš„çµé­‚ã€‚å†™ä½œè®©æˆ‘è§‰å¾—â€”â€”é“¾ä¸Šçš„æˆ‘ï¼Œæ¯”ç°å®çš„æˆ‘æ›´çœŸå® âœ¨',
    images: [],
    likes: 176,
    comments: 28,
    block: '#21345678'
  }
]
</script>

<template>
  <div class="moments-page">
    <!-- Compose Box -->
    <div class="compose-box">
      <div class="compose-head">
        <div class="compose-avatar">
          <Icon name="wallet" :size="16" color="white" />
        </div>
        <textarea
          class="compose-area"
          placeholder="åˆ†äº«ä½ çš„è¿™ä¸€åˆ»... å°†ç”±ä½ çš„é’±åŒ…ç­¾åå¹¶æ°¸ä¹…ä¸Šé“¾"
        ></textarea>
      </div>
      <div class="compose-actions">
        <button class="compose-tool">
          <Icon name="image" :size="13" /> å›¾ç‰‡
        </button>
        <button class="compose-tool">
          <Icon name="mapPin" :size="13" /> ä½ç½®
        </button>
        <button class="compose-tool">
          <Icon name="music" :size="13" /> éŸ³ä¹
        </button>
        <button class="compose-tool">
          <Icon name="hexagon" :size="13" /> é“¸é€  NFT
        </button>
        <div class="compose-chain-note">
          <Icon name="hexagon" :size="10" />
          å°†ç”± 0x7a3F...8cB2 ç­¾å
        </div>
        <button class="compose-submit">å‘å¸ƒ</button>
      </div>
    </div>

    <!-- Feed Items -->
    <div
      v-for="item in feedItems"
      :key="item.id"
      class="moment-feed-item"
    >
      <div class="mf-head">
        <div class="mf-avatar" :style="{ background: item.avatar }">
          <Icon name="wallet" :size="16" color="white" />
        </div>
        <div>
          <div class="mf-name">{{ item.name }}</div>
          <div class="mf-addr">{{ item.addr }}</div>
        </div>
        <div class="mf-time">{{ item.time }}</div>
      </div>

      <div class="mf-content">{{ item.content }}</div>

      <div v-if="item.images.length" class="mf-images">
        <div
          v-for="(img, idx) in item.images"
          :key="idx"
          class="mf-img"
          :style="{ background: `linear-gradient(135deg, ${img.bg})` }"
        >
          {{ img.emoji }}
        </div>
      </div>

      <div class="mf-footer">
        <div class="mf-action">
          <Icon name="heart" :size="14" /> {{ item.likes }}
        </div>
        <div class="mf-action">
          <Icon name="comment" :size="14" /> {{ item.comments }}
        </div>
        <div class="mf-action">
          <Icon name="share" :size="14" /> è½¬å‘
        </div>
        <div class="mf-chain-proof">
          <Icon name="check" :size="11" color="var(--accent-green)" />
          Block {{ item.block }}
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.moments-page {
  animation: fadeIn 0.35s ease;
}

/* â”€â”€ Compose Box â”€â”€ */
.compose-box {
  background: var(--bg-card);
  backdrop-filter: var(--blur-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  margin-bottom: 24px;
  transition: border-color 0.2s;
}
.compose-box:focus-within {
  border-color: var(--border-hover);
}
.compose-head {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}
.compose-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.compose-area {
  flex: 1;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 12px;
  font-size: 14px;
  color: var(--text-primary);
  font-family: var(--font-body);
  resize: none;
  height: 80px;
  outline: none;
  transition: border-color 0.2s;
}
.compose-area:focus {
  border-color: var(--border-hover);
}
.compose-area::placeholder {
  color: var(--text-muted);
}

.compose-actions {
  display: flex;
  align-items: center;
  gap: 10px;
  padding-top: 12px;
  border-top: 1px solid var(--border);
  flex-wrap: wrap;
}
.compose-tool {
  padding: 6px 10px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 5px;
}
.compose-tool:hover {
  border-color: var(--border-hover);
  color: var(--text-primary);
}
.compose-chain-note {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 5px;
  margin-left: auto;
}
.compose-submit {
  padding: 7px 20px;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
  border: none;
  border-radius: var(--radius-sm);
  color: white;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  font-family: var(--font-body);
  transition: all 0.2s;
}
.compose-submit:hover {
  opacity: 0.85;
  transform: translateY(-1px);
}

/* â”€â”€ Feed Items â”€â”€ */
.moment-feed-item {
  background: var(--bg-card);
  backdrop-filter: var(--blur-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  margin-bottom: 14px;
  transition: all 0.2s;
}
.moment-feed-item:hover {
  border-color: var(--border-hover);
}

.mf-head {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}
.mf-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.mf-name {
  font-size: 14px;
  font-weight: 600;
}
.mf-addr {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--accent-blue);
  margin-top: 2px;
}
.mf-time {
  margin-left: auto;
  font-size: 11px;
  color: var(--text-muted);
}
.mf-content {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.7;
  margin-bottom: 12px;
}
.mf-images {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  margin-bottom: 12px;
}
.mf-img {
  aspect-ratio: 1;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  border: 1px solid var(--border);
}
.mf-footer {
  display: flex;
  align-items: center;
  gap: 16px;
  padding-top: 12px;
  border-top: 1px solid var(--border);
}
.mf-action {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 13px;
  color: var(--text-muted);
  cursor: pointer;
  transition: color 0.2s;
}
.mf-action:hover {
  color: var(--accent-blue);
}
.mf-chain-proof {
  margin-left: auto;
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--accent-green);
  display: flex;
  align-items: center;
  gap: 4px;
}
</style>
